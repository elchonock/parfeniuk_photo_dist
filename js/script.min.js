"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}document.addEventListener("DOMContentLoaded",(function(){var e,t;e=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(t=new Image).onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",function(){for(var e=document.querySelectorAll(".ibg"),t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}();var r,o,n=document.querySelectorAll(".to_top"),a=document.querySelector(".page");function c(){var e=Math.max(document.body.scrollTop,a.scrollTop);return e>0?(a.scrollTo({top:Math.floor(e/1.4),behavior:"smooth"}),r=setTimeout(c,30)):clearTimeout(r),!1}n.forEach((function(e){e.addEventListener("click",(function(e){document.body.classList.contains("_touch")||(e.preventDefault(),c())}))})),document.querySelectorAll("[data-nav]").forEach((function(e){e.addEventListener("click",(function(e){if(!document.body.classList.contains("_touch")){e.preventDefault();var t=document.querySelector(e.target.getAttribute("data-nav")),r=e.target.getAttribute("data-nav"),n=t.getBoundingClientRect().top+a.scrollTop;navigator.userAgent.match(/Chrome/i)?(c=r,function e(){if(document.documentElement.scrollHeight<=1040){var t=document.querySelector(c).getBoundingClientRect().top;return t>800?(a.scrollTo({top:Math.floor(1.25*(a.scrollTop+10)),behavior:"smooth"}),o=setTimeout(e,20)):t>1&&t<800?(a.scrollTo({top:Math.floor(a.scrollTop+10),behavior:"smooth"}),o=setTimeout(e,5)):clearTimeout(o),!1}var r=document.querySelector(c).getBoundingClientRect().top-(document.documentElement.scrollHeight-1040);return r>800?(a.scrollTo({top:Math.floor(1.25*(a.scrollTop+10)),behavior:"smooth"}),o=setTimeout(e,20)):r>0&&r<800?(a.scrollTo({top:Math.floor(a.scrollTop+20),behavior:"smooth"}),o=setTimeout(e,10)):clearTimeout(o),!1}()):a.scrollTo({top:n,behavior:"smooth"})}var c}))})),function(){var e=1,t=document.querySelector(".wrapper"),r=document.querySelectorAll(".content_row_item"),o=document.querySelector(".prev"),n=document.querySelector(".next");n.style="-webkit-tap-highlight-color: transparent;",o.style="-webkit-tap-highlight-color: transparent;",r.forEach((function(e){return e.style="-webkit-tap-highlight-color: transparent;"}));var a=document.createElement("div");a.classList.add("popup_photo"),a.style="-webkit-tap-highlight-color: transparent;";var c=document.createElement("img"),i=document.createElement("div");i.classList.add("bigPhotoWrapper"),i.style="-webkit-tap-highlight-color: transparent;",c.style="-webkit-tap-highlight-color: transparent;";var s,l=document.createElement("div");l.classList.add("closeX"),l.style="-webkit-tap-highlight-color: transparent;",t.appendChild(a),a.appendChild(i),a.appendChild(o),a.appendChild(n),i.appendChild(c),i.appendChild(l),t.addEventListener("click",(function(t){t.target&&t.target.classList.contains("content_row_item")&&(t.preventDefault(),n.style.display="block",o.style.display="block",a.style.display="flex",a.style.overflow="hidden",s=t.target.getAttribute("data-photo"),c.setAttribute("src",s),c.classList.add("fadeOne"),r.forEach((function(t,r){s==t.getAttribute("data-photo")&&(e=r)}))),t.target&&t.target.matches("div.popup_photo")&&(a.style.display="none",a.style.overflow="",c.classList.remove("fadeTwo"))})),l.addEventListener("click",(function(){a.style.display="none",a.style.overflow="",c.classList.remove("fadeTwo")})),n.addEventListener("click",(function(t){e+1<r.length?(c.setAttribute("src",r[e+1].getAttribute("data-photo")),e++,c.classList.toggle("fadeOne"),c.classList.toggle("fadeTwo")):(e=0,c.setAttribute("src",r[e].getAttribute("data-photo")),c.classList.toggle("fadeOne"),c.classList.toggle("fadeTwo"))})),o.addEventListener("click",(function(t){e>0?(c.setAttribute("src",r[e-1].getAttribute("data-photo")),e--,c.classList.toggle("fadeOne"),c.classList.toggle("fadeTwo")):(e=r.length-1,c.setAttribute("src",r[e].getAttribute("data-photo")),c.classList.toggle("fadeOne"),c.classList.toggle("fadeTwo"))}))}();var i=document.querySelector(".static_bg_photo_row_H4_text");a.addEventListener("scroll",(function e(){return Math.floor(i.getBoundingClientRect().top-document.documentElement.clientHeight<=-200)&&(i.classList.add("bloom"),i.style.opacity="1",a.removeEventListener("scroll",e)),!1}));var s=document.querySelectorAll(".content_row_item"),l=document.querySelector(".content_row");a.addEventListener("scroll",(function e(){return Math.floor(l.getBoundingClientRect().top-document.documentElement.clientHeight<=-100)&&(s.forEach((function(e,t){setTimeout((function(){e.classList.add("fadeOne")}),75*t)})),a.removeEventListener("scroll",e)),!1}));var u=document.querySelector(".burger"),d=document.querySelector(".menu_body");function m(){d.classList.toggle("_active")}u.addEventListener("click",m),d.addEventListener("click",m);var p={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return p.Android()||p.BlackBerry()||p.iOS()||p.Opera()||p.Windows()}};p.any()?document.body.classList.add("_touch"):document.body.classList.add("_pc");var f=document.querySelector(".social_media_panel"),g=document.querySelector("#top"),h=document.querySelector(".menu_body"),v=0,y=function(){return a.scrollTop},L=function(){return g.classList.contains("hidden_head")};a.addEventListener("scroll",(function(){y()>v&&!L()&&y()>80?(document.documentElement.clientWidth<767&&f.classList.add("hidden_head"),g.classList.add("hidden_head"),h.classList.add("hidden_head")):y()<v&&L()&&(g.classList.remove("hidden_head"),f.classList.remove("hidden_head"),h.classList.remove("hidden_head")),v=y()}));var _=document.querySelectorAll("._popupForm");function A(e){"_popupForm"==e.target.getAttribute("data-popup")&&(e.preventDefault(),_.forEach((function(e){e.classList.add("_active")})))}document.querySelectorAll("[data-popup]").forEach((function(e){e.addEventListener("click",A)})),_.forEach((function(e){e.addEventListener("click",(function(t){if(t.target&&t.target.classList.contains("popup__window")&&e.classList.contains("_active"))e.classList.remove("_active");else if(t.target&&t.target.classList.contains("closeForm")&&e.classList.contains("_active")){e.classList.remove("_active"),document.querySelectorAll(".file__preview").forEach((function(e){return e.innerHTML=""}))}}))}));var b=document.querySelectorAll("form"),w=document.querySelector(".status__success"),E=document.querySelector(".status__failure"),T=document.querySelector(".popup__status"),S=document.querySelectorAll('[name="reference"]');T.addEventListener("click",(function(e){e.target.classList.contains("popup__status")&&T.classList.remove("_active")}));var q="../../img/spinner.svg";b.forEach((function(e){var t;(t=e).addEventListener("submit",(function(e){e.preventDefault();var r=document.createElement("img");r.src=q,r.style.cssText="\n                display: block;\n                margin: 0 auto;\n                ";var o=function(e){var t=0;return e.querySelectorAll("._req").forEach((function(e,r){!function(e){e.classList.remove("_error"),e.parentElement.classList.remove("_error")}(e),"email"===e.getAttribute("name")?function(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}(e)&&(k(e),t++):("checkbox"===e.getAttribute("type")&&!1===e.checked||""===e.value)&&(k(e),t++)})),t}(t),n=new FormData(t),a=n.get("reference"),c=new FileReader;c.readAsArrayBuffer(a),0===o&&(t.append(r),c.onload=function(e){var t=new URLSearchParams({filename:a.name,mimeType:a.type});fetch("".concat("https://script.google.com/macros/s/AKfycbw7q1hq38GVtseUZPH2J8B3c4UAnuJK-DQRGx4QIfYTzdjEiwqBhf_ItrV_fRGX3FHw/exec","?").concat(t),{method:"POST",body:JSON.stringify(_toConsumableArray(new Int8Array(e.target.result))),mode:"no-cors"}).then((function(){i.innerHTML=""})).catch((function(e){return console.log(e)}))},fetch("https://script.google.com/macros/s/AKfycbyKUbVsTFdGXejgm71mlV-AoSwCvJivHFvk8EDQPqfNJ_up8lHg-lsmTnwq423oEFyq/exec",{method:"POST",body:n,mode:"no-cors"}).then((function(){T.classList.remove("_active"),T.classList.add("_active"),w.classList.add("_active"),i.innerHTML="",t.reset()})).catch((function(){T.classList.remove("_active"),T.classList.add("_active"),E.classList.add("_active")})).finally((function(){t.reset(),i.innerHTML="",setTimeout((function(){T.classList.remove("_active")}),3e3),r.remove(),_.forEach((function(e){e.classList.remove("_active")}))})));var i=t.querySelector(".file__preview")}))})),S.forEach((function(e){e.addEventListener("change",(function(t){!function(e){var t=e.files[0];if(!["image/jpeg","image/png","image/gif","image/webp"].includes(t.type))return void(e.value="");if(t.size>10485760)return void alert("Файл должен быть меньше 10МБ.");var r=new FileReader;r.onload=function(t){e.parentElement.parentElement.querySelector(".file__preview").innerHTML='<img src="'.concat(t.target.result,'" alt="preview">')},r.onerror=function(e){alert("Что-то пошло не так...")},r.readAsDataURL(t)}(e)}))}));function k(e){e.classList.add("_error"),e.parentElement.classList.add("_error")}}));
